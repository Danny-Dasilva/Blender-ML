# Generate training data for object detection model

In this tutorial we will go over generating object detection data for both a static object and one that is randomly spawned

* these scripts are tested in blender 2.81 

## Static object 
! img 

### update


### randomize camera

```python
def randomize_camera(x, y, z, roll=0, pitch=0, yaw=0):
    x = uniform(-x, x)
    y= uniform(-y,y)
    z = z
    pitch = pitch
    roll = roll
    yaw = randint(-yaw/2, yaw/2)
  
    fov = 50.0
    pi = 3.14159265

    scene = bpy.data.scenes['_mainScene']
    # Set render resolution
    scene.render.resolution_x = 640
    scene.render.resolution_y = 480

    # Set camera fov in degrees
    scene.camera.data.angle = fov*(pi/180.0)

    # Set camera rotation in euler angles
    scene.camera.rotation_mode = 'XYZ'
    scene.camera.rotation_euler[0] = pitch*(pi/180.0)
    scene.camera.rotation_euler[1] = roll*(pi/180)
    scene.camera.rotation_euler[2] = yaw*(pi/180.0)

    # Set camera translation
    scene.camera.location.x = x
    scene.camera.location.y = y
    scene.camera.location.z = z
    update()
    return scene, scene.camera
```
### center obj

this centers the camera on the objecct passed through

this obkect needs to be passes in the the `object.matrix_world.to_translation()` format

### offset

when creating training data it is important to note 


## get cordinates
returns a json object with the 2d cordinate data of the box in the following json format


`
[
    {
        "image": "render-0y.png",
        "meshes": {
            "monkey": {
                "x1": 0.6286790958986577,
                "x2": 0.7885611171182803,
                "y1": 0.10051047409295591,
                "y2": 0.32216781638591024
            }
        }
    },
]
`

if you put your renders and json file in a directory with `/scripts/visualize.py` you can view the boxes generated by the get cordinates function

## batch render

with all this we can loop through the data and write out the image to a folder. Along with thsi the json data 


### Randomly spawn Objects
in `classroom_rand.blend`
In this section we will randomly spawn and rotate our object and do physics simulation of the object in the scene.
Most of the functions used are from the first project but there are a few new ones to 

## randomize_obj
randomly spawn the object 

## increment frames
loop through physics simulation


## get raycast percentage
When running the object through blenders physics simulation there is a chance the object is obstructed.
This function cast rays at each of the object vertices and compares them to where the ray is hit. 
It then returns the percent hit as a value. If the object is fully obscructed it will return 0, and if it is fully displayed
it will display about 50% because half of the rays will hit and the rest will be obstructed by the object. To note: this value can be less or greater than 50% if the object is not fully symmetrical and is rotated in a way where more or less vertices are shown. 

## Tips
remember to enable cuda in edit cuda

take images

